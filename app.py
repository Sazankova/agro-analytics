import streamlit as st
import pandas as pd
import plotly.express as px
import plotly.graph_objects as go
from plotly.subplots import make_subplots

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
st.set_page_config(
    page_title="–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ —Ä–∞—Å—Ç–µ–Ω–∏–µ–≤–æ–¥—Å—Ç–≤–∞ –†–æ—Å—Å–∏–∏",
    page_icon="üåæ",
    layout="wide",
    initial_sidebar_state="expanded"
)

# –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
st.title('üåæ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ —Ä–∞—Å—Ç–µ–Ω–∏–µ–≤–æ–¥—Å—Ç–≤–∞ –†–æ—Å—Å–∏–∏')
st.markdown("**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —ç–∫—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–∞ —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö –∞–≥—Ä–æ—Ö–æ–ª–¥–∏–Ω–≥–æ–≤**")

# –°–æ–∑–¥–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ –≤–∞—à–µ–π —Ç–∞–±–ª–∏—Ü—ã
def load_company_data():
    data = {
        '‚Ññ': range(1, 16),
        '–†–µ–≥–∏–æ–Ω –†–§': [
            '–ë–µ–ª–≥–æ—Ä–æ–¥—Å–∫–∞—è –æ–±–ª.', '–ë–µ–ª–≥–æ—Ä–æ–¥—Å–∫–∞—è –æ–±–ª.', '–í–æ—Ä–æ–Ω–µ–∂—Å–∫–∞—è –æ–±–ª.', '–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π',
            '–ö—É—Ä—Å–∫–∞—è –æ–±–ª.', '–†–æ—Å—Ç–æ–≤—Å–∫–∞—è –æ–±–ª.', '–°—Ç–∞–≤—Ä–æ–ø–æ–ª—å—Å–∫–∏–π –∫—Ä–∞–π', '–¢–∞—Ç–∞—Ä—Å—Ç–∞–Ω',
            '–ê–ª—Ç–∞–π—Å–∫–∏–π –∫—Ä–∞–π', '–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫–∞—è –æ–±–ª.', '–õ–∏–ø–µ—Ü–∫–∞—è –æ–±–ª.', '–¢–∞–º–±–æ–≤—Å–∫–∞—è –æ–±–ª.',
            '–û—Ä–ª–æ–≤—Å–∫–∞—è –æ–±–ª.', '–ë—Ä—è–Ω—Å–∫–∞—è –æ–±–ª.', '–ü–µ–Ω–∑–µ–Ω—Å–∫–∞—è –æ–±–ª.'
        ],
        '–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏': [
            '–ê–ü–• "–ú–∏—Ä–∞—Ç–æ—Ä–≥"', '–ì–ö "–ê–≥—Ä–æ-–ë–µ–ª–æ–≥–æ—Ä—å–µ"', '–ì–ö "–≠–∫–æ–ù–∏–≤–∞"', '–ê–û "–ü—Ä–æ–¥–∏–º–µ–∫—Å"',
            '–ì–ö "–ê–≥—Ä–æ–ø—Ä–æ–º–∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è"', '"–Æ–≥-–ê–≥—Ä–æ—Ö–æ–ª–¥–∏–Ω–≥"', '"–°—Ç–∞–≤—Ä–æ–ø–æ–ª—å–µ" –ê–ü–ö',
            '"–ö—Ä–∞—Å–Ω—ã–π –í–æ—Å—Ç–æ–∫ –ê–≥—Ä–æ"', '"–ê–≥—Ä–æ—Å–∏–±-–†–∞–∑–¥–æ–ª—å–µ"', '"–°–∏–±–∏—Ä—Å–∫–∞—è –ê–≥—Ä–∞—Ä–Ω–∞—è –ì—Ä—É–ø–ø–∞"',
            '"–ê–≥—Ä–æ—Ñ–∏—Ä–º–∞ –∏–º–µ–Ω–∏ 15 –ª–µ—Ç –û–∫—Ç—è–±—Ä—è"', '"–ê–≥—Ä–æ—Ñ–∏—Ä–º–∞ "–†—É—Å—Å–∫–∞—è –ë–µ—Ä—ëzka"',
            '"–û—Ä–ª–æ–≤—Å–∫–∞—è –ù–∏–≤–∞"', '"–ë—Ä—è–Ω—Å–∫–∞—è –∞–≥—Ä–∞—Ä–Ω–∞—è –≥—Ä—É–ø–ø–∞"', '"–ü–µ–Ω–∑–µ–Ω—Å–∫–∏–µ –∞–≥—Ä–∞—Ä–∏–∏"'
        ],
        '–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è': [
            '–ó–µ—Ä–Ω–æ–≤—ã–µ, –º–∞—Å–ª–æ–∂–∏—Ä–æ–≤—ã–µ', '–ó–µ—Ä–Ω–æ–≤—ã–µ, –º–∞—Å–ª–æ–∂–∏—Ä–æ–≤—ã–µ', '–ó–µ—Ä–Ω–æ–≤—ã–µ, –∫–æ—Ä–º–æ–≤—ã–µ',
            '–ó–µ—Ä–Ω–æ–≤—ã–µ, —Å–∞—Ö–∞—Ä', '–ó–µ—Ä–Ω–æ–≤—ã–µ, –º–∞—Å–ª–æ–∂–∏—Ä–æ–≤—ã–µ', '–ó–µ—Ä–Ω–æ–≤—ã–µ', '–ó–µ—Ä–Ω–æ–≤—ã–µ, –æ–≤–æ—â–∏',
            '–ó–µ—Ä–Ω–æ–≤—ã–µ', '–ó–µ—Ä–Ω–æ–≤—ã–µ, –º–∞—Å–ª–æ–∂–∏—Ä–æ–≤—ã–µ', '–ó–µ—Ä–Ω–æ–≤—ã–µ', '–ó–µ—Ä–Ω–æ–≤—ã–µ, —Å–≤–µ–∫–ª–∞',
            '–ó–µ—Ä–Ω–æ–≤—ã–µ, –ø–æ–¥—Å–æ–ª–Ω–µ—á–Ω–∏–∫', '–ó–µ—Ä–Ω–æ–≤—ã–µ', '–ó–µ—Ä–Ω–æ–≤—ã–µ, –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å', '–ó–µ—Ä–Ω–æ–≤—ã–µ, –º–∞—Å–ª–æ–∂–∏—Ä–æ–≤—ã–µ'
        ],
        '–û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–¥—É–∫—Ü–∏—è': [
            '–ü—à–µ–Ω–∏—Ü–∞, –ø–æ–¥—Å–æ–ª–Ω–µ—á–Ω–∏–∫, —Ä–∞–ø—Å', '–Ø—á–º–µ–Ω—å, –∫—É–∫—É—Ä—É–∑–∞, –ø–æ–¥—Å–æ–ª–Ω–µ—á–Ω–∏–∫',
            '–ü—à–µ–Ω–∏—Ü–∞, –∫—É–∫—É—Ä—É–∑–∞, –≥–æ—Ä–æ—Ö', '–ü—à–µ–Ω–∏—Ü–∞, –∫—É–∫—É—Ä—É–∑–∞, —Å–∞—Ö–∞—Ä',
            '–ü—à–µ–Ω–∏—Ü–∞, –ø–æ–¥—Å–æ–ª–Ω–µ—á–Ω–∏–∫, —Å–æ—è', '–ü—à–µ–Ω–∏—Ü–∞, —è—á–º–µ–Ω—å', '–ü—à–µ–Ω–∏—Ü–∞, –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å, –º–æ—Ä–∫–æ–≤—å',
            '–ü—à–µ–Ω–∏—Ü–∞, —è—á–º–µ–Ω—å, –≥–æ—Ä–æ—Ö', '–ü—à–µ–Ω–∏—Ü–∞, –ø–æ–¥—Å–æ–ª–Ω–µ—á–Ω–∏–∫, –ª–µ–Ω', '–ü—à–µ–Ω–∏—Ü–∞, –æ–≤–µ—Å',
            '–ü—à–µ–Ω–∏—Ü–∞, —Å–∞—Ö–∞—Ä–Ω–∞—è —Å–≤–µ–∫–ª–∞', '–ü—à–µ–Ω–∏—Ü–∞, –ø–æ–¥—Å–æ–ª–Ω–µ—á–Ω–∏–∫', '–ü—à–µ–Ω–∏—Ü–∞, —è—á–º–µ–Ω—å, –≥—Ä–µ—á–∏—Ö–∞',
            '–ü—à–µ–Ω–∏—Ü–∞, –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å', '–ü—à–µ–Ω–∏—Ü–∞, –ø–æ–¥—Å–æ–ª–Ω–µ—á–Ω–∏–∫'
        ],
        '–ì–æ–¥–æ–≤–æ–π –æ–±–æ—Ä–æ—Ç': [
            '>100 –º–ª—Ä–¥ —Ä—É–±.', '50-100 –º–ª—Ä–¥ —Ä—É–±.', '>100 –º–ª—Ä–¥ —Ä—É–±.', '>100 –º–ª—Ä–¥ —Ä—É–±.',
            '50-100 –º–ª—Ä–¥ —Ä—É–±.', '10-50 –º–ª—Ä–¥ —Ä—É–±.', '10-50 –º–ª—Ä–¥ —Ä—É–±.', '50-100 –º–ª—Ä–¥ —Ä—É–±.',
            '50-100 –º–ª—Ä–¥ —Ä—É–±.', '10-50 –º–ª—Ä–¥ —Ä—É–±.', '10-50 –º–ª—Ä–¥ —Ä—É–±.', '10-50 –º–ª—Ä–¥ —Ä—É–±.',
            '10-50 –º–ª—Ä–¥ —Ä—É–±.', '10-50 –º–ª—Ä–¥ —Ä—É–±.', '10-50 –º–ª—Ä–¥ —Ä—É–±.'
        ],
        '–ü–æ—Å–µ–≤–Ω—ã–µ –ø–ª–æ—â–∞–¥–∏ (–≥–∞)': [
            600000, 250000, 600000, 500000, 300000, 150000, 120000, 350000,
            280000, 100000, 85000, 95000, 110000, 75000, 80000
        ],
        '–≠–∫—Å–ø–æ—Ä—Ç (—Ç–æ–Ω–Ω/–≥–æ–¥)': [
            450000, 180000, 350000, 700000, 220000, 90000, 60000, 150000,
            200000, 45000, 35000, 50000, 55000, 25000, 40000
        ],
        '–î–æ–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ': [
            '25%', '30%', '20%', '45%', '30%', '25%', '20%', '15%',
            '30%', '18%', '15%', '20%', '18%', '12%', '18%'
        ],
        '–û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω—ã —ç–∫—Å–ø–æ—Ä—Ç–∞': [
            '–ï–≥–∏–ø–µ—Ç, –¢—É—Ä—Ü–∏—è, –ë–ª–∏–∂–Ω–∏–π –í–æ—Å—Ç–æ–∫', '–¢—É—Ä—Ü–∏—è, –ï–≥–∏–ø–µ—Ç, —Å—Ç—Ä–∞–Ω—ã –°–ù–ì',
            '–ï–≥–∏–ø–µ—Ç, –¢—É—Ä—Ü–∏—è, –ò—Ä–∞–Ω', '–ï–≥–∏–ø–µ—Ç, –¢—É—Ä—Ü–∏—è, –°–∞—É–¥–æ–≤—Å–∫–∞—è –ê—Ä–∞–≤–∏—è',
            '–¢—É—Ä—Ü–∏—è, –ï–≥–∏–ø–µ—Ç, –°–µ–≤–µ—Ä–Ω–∞—è –ê—Ñ—Ä–∏–∫–∞', '–¢—É—Ä—Ü–∏—è, –ï–≥–∏–ø–µ—Ç',
            '–ê–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω, –ì—Ä—É–∑–∏—è, —Å—Ç—Ä–∞–Ω—ã –°–ù–ì', '–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –ê–∑–∏—è, –ë–ª–∏–∂–Ω–∏–π –í–æ—Å—Ç–æ–∫',
            '–ö–∏—Ç–∞–π, –ú–æ–Ω–≥–æ–ª–∏—è, –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –ê–∑–∏—è', '–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –ê–∑–∏—è, –ú–æ–Ω–≥–æ–ª–∏—è',
            '–ë–µ–ª–∞—Ä—É—Å—å, –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω', '–¢—É—Ä—Ü–∏—è, –ï–≥–∏–ø–µ—Ç', '–¢—É—Ä—Ü–∏—è, —Å—Ç—Ä–∞–Ω—ã –ë–∞–ª—Ç–∏–∏',
            '–ë–µ–ª–∞—Ä—É—Å—å, —Å—Ç—Ä–∞–Ω—ã –ë–∞–ª—Ç–∏–∏', '–¢—É—Ä—Ü–∏—è, –ò—Ä–∞–Ω'
        ],
        '–°–∞–π—Ç': [
            'miratorg.ru', 'agrobelogorie.ru', 'ekoniva.ru', 'prodimex.ru',
            'apkua.ru', 'ugagro.com', 'apk-stavropolye.ru', 'kea.ru',
            'agrosib-razdolie.ru', 'sibagrogroup.ru', 'af15.ru', 'rusbereza.ru',
            'orlniva.ru', 'bagroup.ru', 'penzagro.ru'
        ]
    }
    return pd.DataFrame(data)

def load_export_data():
    data = {
        '–ö–æ–º–ø–∞–Ω–∏—è': [
            '–ê–ü–• "–ú–∏—Ä–∞—Ç–æ—Ä–≥"', '–ì–ö "–≠–∫–æ–ù–∏–≤–∞"', '–ê–û "–ü—Ä–æ–¥–∏–º–µ–∫—Å"',
            '–ì–ö "–ê–≥—Ä–æ–ø—Ä–æ–º–∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è"', '"–ê–≥—Ä–æ—Å–∏–±-–†–∞–∑–¥–æ–ª—å–µ"', '"–ö—Ä–∞—Å–Ω—ã–π –í–æ—Å—Ç–æ–∫ –ê–≥—Ä–æ"'
        ],
        '–û–±—â–∏–π —ç–∫—Å–ø–æ—Ä—Ç (—Ç–æ–Ω–Ω/–≥–æ–¥)': [450000, 350000, 700000, 220000, 200000, 150000],
        '–ó–µ—Ä–Ω–æ–≤—ã–µ —ç–∫—Å–ø–æ—Ä—Ç': [300000, 280000, 600000, 150000, 150000, 120000],
        '–ú–∞—Å–ª–∏—á–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç': [150000, 70000, 0, 70000, 50000, 30000],
        '–ü—Ä–æ—á–∞—è –ø—Ä–æ–¥—É–∫—Ü–∏—è': ['—Ä–∞–ø—Å, –∫–æ—Ä–º–∞', '—Å–µ–º–µ–Ω–∞, –≥–æ—Ä–æ—Ö', '—Å–∞—Ö–∞—Ä', '—Å–æ—è', '–ª–µ–Ω', '–≥–æ—Ä–æ—Ö'],
        '–û—Å–Ω–æ–≤–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã': [
            '–ß–µ—Ä–Ω–æ–µ –º–æ—Ä–µ, —Å—É—Ö–æ–ø—É—Ç–Ω—ã–µ', '–ß–µ—Ä–Ω–æ–µ –º–æ—Ä–µ, –ë–∞–ª—Ç–∏–∫–∞', '–ß–µ—Ä–Ω–æ–µ –º–æ—Ä–µ, –°—Ä–µ–¥–∏–∑–µ–º–Ω–æ–º–æ—Ä—å–µ',
            '–ß–µ—Ä–Ω–æ–µ –º–æ—Ä–µ', '–ñ–µ–ª–µ–∑–Ω–æ–¥–æ—Ä–æ–∂–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã', '–ö–∞—Å–ø–∏–π—Å–∫–æ–µ –º–æ—Ä–µ, —Å—É—Ö–æ–ø—É—Ç–Ω—ã–µ'
        ],
        '–ö–ª—é—á–µ–≤—ã–µ –ø–æ—Ä—Ç—ã –æ—Ç–≥—Ä—É–∑–∫–∏': [
            '–ù–æ–≤–æ—Ä–æ—Å—Å–∏–π—Å–∫, –¢–∞–º–∞–Ω—å', '–ù–æ–≤–æ—Ä–æ—Å—Å–∏–π—Å–∫, –£—Å—Ç—å-–õ—É–≥–∞', '–ù–æ–≤–æ—Ä–æ—Å—Å–∏–π—Å–∫, –¢—É–∞–ø—Å–µ',
            '–ù–æ–≤–æ—Ä–æ—Å—Å–∏–π—Å–∫, –¢–∞–º–∞–Ω—å', '—á–µ—Ä–µ–∑ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω –≤ –ö–∏—Ç–∞–π', '–ê—Å—Ç—Ä–∞—Ö–∞–Ω—å, —á–µ—Ä–µ–∑ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω'
        ]
    }
    return pd.DataFrame(data)

def load_region_data():
    data = {
        '–†–µ–≥–∏–æ–Ω': [
            '–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π', '–†–æ—Å—Ç–æ–≤—Å–∫–∞—è –æ–±–ª.', '–ë–µ–ª–≥–æ—Ä–æ–¥—Å–∫–∞—è –æ–±–ª.',
            '–í–æ—Ä–æ–Ω–µ–∂—Å–∫–∞—è –æ–±–ª.', '–ö—É—Ä—Å–∫–∞—è –æ–±–ª.', '–ê–ª—Ç–∞–π—Å–∫–∏–π –∫—Ä–∞–π',
            '–°—Ç–∞–≤—Ä–æ–ø–æ–ª—å—Å–∫–∏–π –∫—Ä–∞–π', '–¢–∞—Ç–∞—Ä—Å—Ç–∞–Ω'
        ],
        '–û–±—â–∏–π —ç–∫—Å–ø–æ—Ä—Ç–Ω—ã–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª (—Ç–æ–Ω–Ω)': [
            5000000, 3500000, 2000000, 1800000, 1200000, 1000000, 900000, 800000
        ],
        '–û—Å–Ω–æ–≤–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç–Ω—ã–µ –∫—É–ª—å—Ç—É—Ä—ã': [
            '–ø—à–µ–Ω–∏—Ü–∞, –∫—É–∫—É—Ä—É–∑–∞, —è—á–º–µ–Ω—å', '–ø—à–µ–Ω–∏—Ü–∞, –ø–æ–¥—Å–æ–ª–Ω–µ—á–Ω–∏–∫, —è—á–º–µ–Ω—å',
            '–ø—à–µ–Ω–∏—Ü–∞, –ø–æ–¥—Å–æ–ª–Ω–µ—á–Ω–∏–∫, —Ä–∞–ø—Å', '–ø—à–µ–Ω–∏—Ü–∞, –∫—É–∫—É—Ä—É–∑–∞, –≥–æ—Ä–æ—Ö',
            '–ø—à–µ–Ω–∏—Ü–∞, –ø–æ–¥—Å–æ–ª–Ω–µ—á–Ω–∏–∫, —Å–æ—è', '–ø—à–µ–Ω–∏—Ü–∞, –ø–æ–¥—Å–æ–ª–Ω–µ—á–Ω–∏–∫, –ª–µ–Ω',
            '–ø—à–µ–Ω–∏—Ü–∞, —è—á–º–µ–Ω—å, –∫—É–∫—É—Ä—É–∑–∞', '–ø—à–µ–Ω–∏—Ü–∞, —è—á–º–µ–Ω—å, –≥–æ—Ä–æ—Ö'
        ],
        '–ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏-—ç–∫—Å–ø–æ—Ä—Ç–µ—Ä—ã': [
            '–ü—Ä–æ–¥–∏–º–µ–∫—Å, –ê–§–ì –ù–∞—Ü–∏–æ–Ω–∞–ª—å, –Æ–≥ –†—É—Å–∏', '–Æ–≥-–ê–≥—Ä–æ—Ö–æ–ª–¥–∏–Ω–≥, –î–æ–Ω-–ê–≥—Ä–æ',
            '–ú–∏—Ä–∞—Ç–æ—Ä–≥, –ê–≥—Ä–æ-–ë–µ–ª–æ–≥–æ—Ä—å–µ', '–≠–∫–æ–ù–∏–≤–∞, –ß–µ—Ä–∫–∏–∑–æ–≤–æ-–†–∞—Å—Ç–µ–Ω–∏–µ–≤–æ–¥—Å—Ç–≤–æ',
            '–ê–≥—Ä–æ–ø—Ä–æ–º–∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è, –ö—É—Ä—Å–∫–∞–≥—Ä–æ', '–ê–≥—Ä–æ—Å–∏–±-–†–∞–∑–¥–æ–ª—å–µ, –ê–ª—Ç–∞–π—Å–∫–∏–µ –Ω–∏–≤—ã',
            '–°—Ç–∞–≤—Ä–æ–ø–æ–ª—å–µ –ê–ü–ö, –°—Ç–∞–≤–ê–≥—Ä–æ', '–ö—Ä–∞—Å–Ω—ã–π –í–æ—Å—Ç–æ–∫ –ê–≥—Ä–æ, –¢–∞—Ç–ê–≥—Ä–æ'
        ],
        '–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è': [
            '–ï–≥–∏–ø–µ—Ç, –¢—É—Ä—Ü–∏—è, –ë–ª–∏–∂–Ω–∏–π –í–æ—Å—Ç–æ–∫', '–¢—É—Ä—Ü–∏—è, –ï–≥–∏–ø–µ—Ç, –°–µ–≤–µ—Ä–Ω–∞—è –ê—Ñ—Ä–∏–∫–∞',
            '–¢—É—Ä—Ü–∏—è, –ï–≥–∏–ø–µ—Ç, –ï–≤—Ä–æ–ø–∞', '–¢—É—Ä—Ü–∏—è, –ò—Ä–∞–Ω, –ë–ª–∏–∂–Ω–∏–π –í–æ—Å—Ç–æ–∫',
            '–¢—É—Ä—Ü–∏—è, –°–µ–≤–µ—Ä–Ω–∞—è –ê—Ñ—Ä–∏–∫–∞', '–ö–∏—Ç–∞–π, –ú–æ–Ω–≥–æ–ª–∏—è, –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –ê–∑–∏—è',
            '–ó–∞–∫–∞–≤–∫–∞–∑—å–µ, —Å—Ç—Ä–∞–Ω—ã –°–ù–ì', '–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –ê–∑–∏—è, –ë–ª–∏–∂–Ω–∏–π –í–æ—Å—Ç–æ–∫'
        ]
    }
    return pd.DataFrame(data)

# –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
companies_df = load_company_data()
export_df = load_export_data()
regions_df = load_region_data()

# –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å
st.sidebar.header("üîç –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º")
section = st.sidebar.radio(
    "–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–¥–µ–ª:",
    ["üìà –û–±–∑–æ—Ä —Ä—ã–Ω–∫–∞", "üè¢ –ê–Ω–∞–ª–∏–∑ –∫–æ–º–ø–∞–Ω–∏–π", "üó∫Ô∏è –†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑", "üìä –≠–∫—Å–ø–æ—Ä—Ç–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"]
)

# –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ - –û–±–∑–æ—Ä —Ä—ã–Ω–∫–∞
if section == "üìà –û–±–∑–æ—Ä —Ä—ã–Ω–∫–∞":
    st.header("üìà –û–±–∑–æ—Ä —Ä–æ—Å—Å–∏–π—Å–∫–æ–≥–æ —ç–∫—Å–ø–æ—Ä—Ç–∞ —Ä–∞—Å—Ç–µ–Ω–∏–µ–≤–æ–¥—Å—Ç–≤–∞")
    
    col1, col2, col3 = st.columns(3)
    
    with col1:
        total_export = companies_df['–≠–∫—Å–ø–æ—Ä—Ç (—Ç–æ–Ω–Ω/–≥–æ–¥)'].sum()
        st.metric("–û–±—â–∏–π —ç–∫—Å–ø–æ—Ä—Ç –∫–æ–º–ø–∞–Ω–∏–π", f"{total_export:,} —Ç–æ–Ω–Ω/–≥–æ–¥")
    
    with col2:
        total_area = companies_df['–ü–æ—Å–µ–≤–Ω—ã–µ –ø–ª–æ—â–∞–¥–∏ (–≥–∞)'].sum()
        st.metric("–°—É–º–º–∞—Ä–Ω—ã–µ –ø–æ—Å–µ–≤–Ω—ã–µ –ø–ª–æ—â–∞–¥–∏", f"{total_area:,} –≥–∞")
    
    with col3:
        avg_export_share = companies_df['–î–æ–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ'].str.rstrip('%').astype(float).mean()
        st.metric("–°—Ä–µ–¥–Ω—è—è –¥–æ–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞", f"{avg_export_share:.1f}%")
    
    # –ö–∞—Ä—Ç–∞ —Ä–µ–≥–∏–æ–Ω–æ–≤
    st.subheader("üó∫Ô∏è –≠–∫—Å–ø–æ—Ä—Ç–Ω—ã–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª –ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º")
    
    fig = px.bar(regions_df, 
                 x='–û–±—â–∏–π —ç–∫—Å–ø–æ—Ä—Ç–Ω—ã–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª (—Ç–æ–Ω–Ω)', 
                 y='–†–µ–≥–∏–æ–Ω',
                 orientation='h',
                 title='–≠–∫—Å–ø–æ—Ä—Ç–Ω—ã–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª —Ä–µ–≥–∏–æ–Ω–æ–≤ –†–æ—Å—Å–∏–∏',
                 color='–û–±—â–∏–π —ç–∫—Å–ø–æ—Ä—Ç–Ω—ã–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª (—Ç–æ–Ω–Ω)',
                 color_continuous_scale='viridis')
    st.plotly_chart(fig, use_container_width=True)
    
    # –¢–æ–ø –∫–æ–º–ø–∞–Ω–∏–π –ø–æ —ç–∫—Å–ø–æ—Ä—Ç—É
    st.subheader("üèÜ –¢–æ–ø-5 –∫–æ–º–ø–∞–Ω–∏–π –ø–æ –æ–±—ä–µ–º—É —ç–∫—Å–ø–æ—Ä—Ç–∞")
    top_companies = companies_df.nlargest(5, '–≠–∫—Å–ø–æ—Ä—Ç (—Ç–æ–Ω–Ω/–≥–æ–¥)')[['–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏', '–≠–∫—Å–ø–æ—Ä—Ç (—Ç–æ–Ω–Ω/–≥–æ–¥)', '–†–µ–≥–∏–æ–Ω –†–§']]
    st.dataframe(top_companies, use_container_width=True)

# –†–∞–∑–¥–µ–ª –∫–æ–º–ø–∞–Ω–∏–π
elif section == "üè¢ –ê–Ω–∞–ª–∏–∑ –∫–æ–º–ø–∞–Ω–∏–π":
    st.header("üè¢ –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∞–≥—Ä–æ—Ö–æ–ª–¥–∏–Ω–≥–æ–≤")
    
    # –§–∏–ª—å—Ç—Ä—ã
    col1, col2 = st.columns(2)
    with col1:
        selected_region = st.selectbox("–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–≥–∏–æ–Ω", ["–í—Å–µ"] + list(companies_df['–†–µ–≥–∏–æ–Ω –†–§'].unique()))
    with col2:
        selected_specialization = st.selectbox("–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é", ["–í—Å–µ"] + list(companies_df['–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è'].unique()))
    
    # –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
    filtered_companies = companies_df.copy()
    if selected_region != "–í—Å–µ":
        filtered_companies = filtered_companies[filtered_companies['–†–µ–≥–∏–æ–Ω –†–§'] == selected_region]
    if selected_specialization != "–í—Å–µ":
        filtered_companies = filtered_companies[filtered_companies['–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è'] == selected_specialization]
    
    # –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
    col1, col2 = st.columns(2)
    
    with col1:
        fig1 = px.scatter(filtered_companies, 
                         x='–ü–æ—Å–µ–≤–Ω—ã–µ –ø–ª–æ—â–∞–¥–∏ (–≥–∞)', 
                         y='–≠–∫—Å–ø–æ—Ä—Ç (—Ç–æ–Ω–Ω/–≥–æ–¥)',
                         size='–≠–∫—Å–ø–æ—Ä—Ç (—Ç–æ–Ω–Ω/–≥–æ–¥)',
                         color='–†–µ–≥–∏–æ–Ω –†–§',
                         hover_name='–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏',
                         title='–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —ç–∫—Å–ø–æ—Ä—Ç–∞ –æ—Ç –ø–æ—Å–µ–≤–Ω—ã—Ö –ø–ª–æ—â–∞–¥–µ–π')
        st.plotly_chart(fig1, use_container_width=True)
    
    with col2:
        fig2 = px.treemap(filtered_companies, 
                         path=['–†–µ–≥–∏–æ–Ω –†–§', '–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏'],
                         values='–≠–∫—Å–ø–æ—Ä—Ç (—Ç–æ–Ω–Ω/–≥–æ–¥)',
                         title='–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ –ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º –∏ –∫–æ–º–ø–∞–Ω–∏—è–º')
        st.plotly_chart(fig2, use_container_width=True)
    
    # –¢–∞–±–ª–∏—Ü–∞ –∫–æ–º–ø–∞–Ω–∏–π
    st.subheader("üìã –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–º–ø–∞–Ω–∏—è—Ö")
    display_columns = ['–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏', '–†–µ–≥–∏–æ–Ω –†–§', '–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è', 
                      '–≠–∫—Å–ø–æ—Ä—Ç (—Ç–æ–Ω–Ω/–≥–æ–¥)', '–ü–æ—Å–µ–≤–Ω—ã–µ –ø–ª–æ—â–∞–¥–∏ (–≥–∞)', '–û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω—ã —ç–∫—Å–ø–æ—Ä—Ç–∞']
    st.dataframe(filtered_companies[display_columns], use_container_width=True)

# –†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑
elif section == "üó∫Ô∏è –†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑":
    st.header("üó∫Ô∏è –†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —ç–∫—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–∞")
    
    # –ö–∞—Ä—Ç–∞ —ç–∫—Å–ø–æ—Ä—Ç–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤
    st.subheader("üåç –û—Å–Ω–æ–≤–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è")
    
    # –°–æ–∑–¥–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∫–∞—Ä—Ç—ã (—É–ø—Ä–æ—â–µ–Ω–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã)
    region_coords = {
        '–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π': (45.0, 39.0),
        '–†–æ—Å—Ç–æ–≤—Å–∫–∞—è –æ–±–ª.': (47.2, 39.7),
        '–ë–µ–ª–≥–æ—Ä–æ–¥—Å–∫–∞—è –æ–±–ª.': (50.6, 36.6),
        '–í–æ—Ä–æ–Ω–µ–∂—Å–∫–∞—è –æ–±–ª.': (51.7, 39.2),
        '–ö—É—Ä—Å–∫–∞—è –æ–±–ª.': (51.7, 36.2),
        '–ê–ª—Ç–∞–π—Å–∫–∏–π –∫—Ä–∞–π': (52.5, 83.0),
        '–°—Ç–∞–≤—Ä–æ–ø–æ–ª—å—Å–∫–∏–π –∫—Ä–∞–π': (45.0, 43.0),
        '–¢–∞—Ç–∞—Ä—Å—Ç–∞–Ω': (55.8, 49.1)
    }
    
    fig = go.Figure()
    
    # –î–æ–±–∞–≤–ª—è–µ–º —Ä–µ–≥–∏–æ–Ω—ã
    for region in regions_df['–†–µ–≥–∏–æ–Ω']:
        if region in region_coords:
            fig.add_trace(go.Scattergeo(
                lon = [region_coords[region][1]],
                lat = [region_coords[region][0]],
                text = region,
                mode = 'markers',
                marker = dict(
                    size = regions_df[regions_df['–†–µ–≥–∏–æ–Ω'] == region]['–û–±—â–∏–π —ç–∫—Å–ø–æ—Ä—Ç–Ω—ã–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª (—Ç–æ–Ω–Ω)'].values[0] / 100000,
                    color = 'red',
                    line = dict(width=3, color='darkred')
                ),
                name = region
            ))
    
    fig.update_layout(
        title = '–ì–µ–æ–≥—Ä–∞—Ñ–∏—è —ç–∫—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–∞ –†–æ—Å—Å–∏–∏',
        geo = dict(
            scope = 'world',
            projection_type = 'natural earth',
            showland = True,
            landcolor = 'lightgreen',
            showcountries = True,
            countrycolor = 'black'
        )
    )
    
    st.plotly_chart(fig, use_container_width=True)
    
    # –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º
    st.subheader("üìä –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º")
    
    col1, col2 = st.columns(2)
    
    with col1:
        fig3 = px.pie(regions_df, 
                     values='–û–±—â–∏–π —ç–∫—Å–ø–æ—Ä—Ç–Ω—ã–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª (—Ç–æ–Ω–Ω)', 
                     names='–†–µ–≥–∏–æ–Ω',
                     title='–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —ç–∫—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–∞ –ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º')
        st.plotly_chart(fig3, use_container_width=True)
    
    with col2:
        selected_region_detail = st.selectbox("–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–≥–∏–æ–Ω –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞", regions_df['–†–µ–≥–∏–æ–Ω'])
        region_data = regions_df[regions_df['–†–µ–≥–∏–æ–Ω'] == selected_region_detail].iloc[0]
        
        st.info(f"""
        **üìà {selected_region_detail}**
        
        **–≠–∫—Å–ø–æ—Ä—Ç–Ω—ã–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª:** {region_data['–û–±—â–∏–π —ç–∫—Å–ø–æ—Ä—Ç–Ω—ã–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª (—Ç–æ–Ω–Ω)']:,} —Ç–æ–Ω–Ω
        **–û—Å–Ω–æ–≤–Ω—ã–µ –∫—É–ª—å—Ç—É—Ä—ã:** {region_data['–û—Å–Ω–æ–≤–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç–Ω—ã–µ –∫—É–ª—å—Ç—É—Ä—ã']}
        **–ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏:** {region_data['–ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏-—ç–∫—Å–ø–æ—Ä—Ç–µ—Ä—ã']}
        **–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** {region_data['–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è']}
        """)

# –≠–∫—Å–ø–æ—Ä—Ç–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
elif section == "üìä –≠–∫—Å–ø–æ—Ä—Ç–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞":
    st.header("üìä –î–µ—Ç–∞–ª—å–Ω–∞—è —ç–∫—Å–ø–æ—Ä—Ç–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞")
    
    col1, col2 = st.columns(2)
    
    with col1:
        # –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ –ø–æ —Ç–∏–ø–∞–º –ø—Ä–æ–¥—É–∫—Ü–∏–∏
        st.subheader("üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ –ø–æ —Ç–∏–ø–∞–º –ø—Ä–æ–¥—É–∫—Ü–∏–∏")
        
        export_types = export_df[['–ö–æ–º–ø–∞–Ω–∏—è', '–ó–µ—Ä–Ω–æ–≤—ã–µ —ç–∫—Å–ø–æ—Ä—Ç', '–ú–∞—Å–ª–∏—á–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç']].melt(
            id_vars=['–ö–æ–º–ø–∞–Ω–∏—è'], 
            var_name='–¢–∏–ø –ø—Ä–æ–¥—É–∫—Ü–∏–∏', 
            value_name='–û–±—ä–µ–º —ç–∫—Å–ø–æ—Ä—Ç–∞'
        )
        
        fig = px.bar(export_types, 
                    x='–ö–æ–º–ø–∞–Ω–∏—è', 
                    y='–û–±—ä–µ–º —ç–∫—Å–ø–æ—Ä—Ça',
                    color='–¢–∏–ø –ø—Ä–æ–¥—É–∫—Ü–∏–∏',
                    barmode='stack',
                    title='–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤–µ–¥—É—â–∏—Ö –∫–æ–º–ø–∞–Ω–∏–π')
        st.plotly_chart(fig, use_container_width=True)
    
    with col2:
        # –õ–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã
        st.subheader("üö¢ –õ–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã —ç–∫—Å–ø–æ—Ä—Ç–∞")
        
        route_counts = export_df['–û—Å–Ω–æ–≤–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã'].value_counts()
        fig2 = px.pie(values=route_counts.values, 
                     names=route_counts.index,
                     title='–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —ç–∫—Å–ø–æ—Ä—Ç–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤')
        st.plotly_chart(fig2, use_container_width=True)
    
    # –î–µ—Ç–∞–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞
    st.subheader("üìã –î–µ—Ç–∞–ª—å–Ω–∞—è —ç–∫—Å–ø–æ—Ä—Ç–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–º–ø–∞–Ω–∏–π")
    st.dataframe(export_df, use_container_width=True)

# –§—É—Ç–µ—Ä
st.markdown("---")
st.markdown("""
<div style='text-align: center'>
    <p><strong>–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π —Å–µ—Ä–≤–∏—Å —ç–∫—Å–ø–æ—Ä—Ç–∞ —Ä–∞—Å—Ç–µ–Ω–∏–µ–≤–æ–¥—Å—Ç–≤–∞ –†–æ—Å—Å–∏–∏</strong></p>
    <p>–î–∞–Ω–Ω—ã–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã –Ω–∞ 2024 –≥–æ–¥ | –ò—Å—Ç–æ—á–Ω–∏–∫: –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–π</p>
</div>
""", unsafe_allow_html=True)
